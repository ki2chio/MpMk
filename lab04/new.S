#include "asmroutine.h"
;Экспортируем asm_func
.global asm_func
;Реализуем функцию
asm_func:
; Параметр будет находиться в R25:R24 (адрес переменной)
; Переносим значение в указатель X
mov R26, R24
mov R27, R25
; Загружаем значение из памяти
ld R24, X
;Сравниваем значение с константой
cpi R24, MYDEFINE
;Выбираем большее значение
brsh M1
ldi R24, MYDEFINE
M1:
; Все, больше ничего делать не надо, потому что
; возвращаемое значение находится в R24, ; выходим из подпрограммы
ret